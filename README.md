# Assingment

## 概要
本プロジェクトでは、道路建設計画支援システムを開発する。機能として断片的な道の情報からの道路網復元と、道路も往生の経路検索システム、新たな地点につなぐための最適な道の提案機能、重要性の高い道の検出機能を実装する。  

## 要求
・1からNまでのユニークなIDで識別される地点を管理する。  
・1からMまでのユニークなIDで識別される道として、地点を両端点とした線分を管理する。  
・道同士が交差する点を交差地点として検出し、管理する。  
・ある地点と別のある地点の間を、道を通って最短距離で到達するときの距離と経路を訊ねるQ個のクエリが与えられる。  
・Q個のクエリについて2番目に短い距離や3番目に短い距離で到達するときの距離と経路を要求される場合もある。  
・追加でPか所の地点が与えられ、既存の道路網につなぐための最短の道を提案する。  
・追加で与えられた地点や、既存の道路網につなぐためにできた新たな地点についても、クエリの対象にできるようにする。  

## 入力制約
・入力される座標はすべて整数  
・線分が線で重なることはない  

## 入力形式
入力は以下の形式で与えられる。  
N M P Q  
x<sub>1</sub> y<sub>1</sub>  
x<sub>2</sub> y<sub>2</sub>  
:  
x<sub>N</sub> y<sub>N</sub>  
b<sub>1</sub> e<sub>1</sub>  
b<sub>2</sub> e<sub>2</sub>  
:  
b<sub>M</sub> e<sub>M</sub>  
x<sub>N+1</sub> y<sub>N+1</sub>  
x<sub>N+2</sub> y<sub>N+2</sub>  
:  
x<sub>N+P y<sub>N+P  
s<sub>1</sub> d<sub>1</sub> k<sub>1</sub>  
s<sub>2</sub> d<sub>2</sub> k<sub>2</sub>  
:  
s<sub>Q</sub> d<sub>Q</sub> k<sub>Q</sub>  

1行目に地点の座標の数N、道の数M、追加される点の座標の数P、経路の問い合わせの数Qが、空白区切りで与えられる。  
  続くN行に地点のx,y座標が整数で与えられる。x<sub>i</sub> y<sub>i</sub>はi番目の地点のx,y座標を表す。続くM行に道の情報が与えられる。b<sub>i</sub> e<sub>i</sub>は番目の道が、地点番号b<sub>i</sub>と地点番号e<sub>i</sub>を結んだ線分として与えられていることを表す。  
続くP行に追加される地点のx,y座標が与えられる。x<sub>N+i</sub> y<sub>N+i</sub>はi番目の追加地点のx,y座標を表す。  
続くQ行に経路を求める始点と終点が与えられる。s<sub>i</sub> d<sub>i</sub>はそれぞれi番目の問い合わせの始点と終点の地点番号を表し、k<sub>i</sub>はk番目までの最短経路について問い合わせていることを表す。  
